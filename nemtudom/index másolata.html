<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SZAG InfoTV</title>
<link rel="icon" type="image/x-icon" href="favicon.png">

<style>

body {
    font-family: Verdana, sans-serif;
    padding: 0;
    margin: 0;
}

.mySlides {
    display: none;
}
    
img {vertical-align: middle;}

embed { vertical-align: middle;}


/* Slideshow container */
.slideshow-container {
    max-width: 100%;
    position: center;
    margin: 0px;
}

</style>
</head>
    
<body>
<div class="slideshow-container">

<div class="mySlides">
        <img id="lunch_image" src="img/szag.png" style="width:100%" style="height:100%" alt="Ebéd">
</div>


</div>

<div style="text-align:center">
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 
  <span class="dot"></span> 

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    
let img_lunch_images = [
  {
    date: "2024-05-02",
    url: "img/e4.png"
  },
    {
    date: "2024-05-03",
    url: "img/e5.png"
  },
    {
    date: "2019-10-05",
    url: "https://via.placeholder.com/150"
  }
];

//get today date & format to YYYY-MM-DD
var today = new Date();
today = today.toISOString().split('T')[0];

//check today date in ring image array
object = img_lunch_images.find(o => Object.entries(o).find(([k, value]) => k === 'date' && value === today) !== undefined);

//if today date in array change image url
if(object != null){

  $("#lunch_image").attr("src",object.url);
}

//Slide frissítés
let slideIndex = 0;
showSlides();

function showSlides() {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";  
  }
  slideIndex++;
  if (slideIndex > slides.length) {slideIndex = 1}    
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
  setTimeout(showSlides, 30000); // Lapozás 30 másodpercenként
}

// Idő lekérdezése az oldal időzített lefrissítéséhez
function refreshAt(hours, minutes, seconds) {
    var now = new Date();
    var then = new Date();

    if(now.getHours() > hours ||
        (now.getHours() == hours && now.getMinutes() > minutes) ||
        now.getHours() == hours && now.getMinutes() == minutes && now.getSeconds() >= seconds) {
        then.setDate(now.getDate() + 1);
    }
    then.setHours(hours);
    then.setMinutes(minutes);
    then.setSeconds(seconds);

    var timeout = (then.getTime() - now.getTime());
    setTimeout(function() { window.location.reload(true); }, timeout);
}

// Oldal lefrissítése az alábbi időpontokban - új időpontnál figyeljünk, hogy órán legyen, mert szünetben gagyi
refreshAt(06,25,56);
refreshAt(06,55,56);
refreshAt(07,25,56);
refreshAt(07,40,56);
refreshAt(07,55,56);
refreshAt(08,05,56);
refreshAt(08,20,56);
refreshAt(08,35,56);
refreshAt(09,05,56);
refreshAt(09,20,56);
refreshAt(09,35,56);
refreshAt(10,05,56);
refreshAt(10,20,56);
refreshAt(10,35,56);
refreshAt(11,05,56);
refreshAt(11,20,56);
refreshAt(11,35,56);
refreshAt(12,05,56);
refreshAt(12,20,56);
refreshAt(12,35,56);
refreshAt(13,05,56);
refreshAt(13,20,56);
refreshAt(13,35,56);
refreshAt(14,05,56);
refreshAt(14,20,56);
refreshAt(14,35,56);
refreshAt(15,05,56);
refreshAt(15,20,56);
refreshAt(15,35,56);
refreshAt(16,05,56);
refreshAt(16,20,56);
refreshAt(17,05,56);
refreshAt(17,20,56);
refreshAt(18,05,56);
refreshAt(18,20,56);
refreshAt(19,05,56);
refreshAt(19,20,56);
    
// Autofullscreen
addEventListener("click", function() {
    var
          el = document.documentElement
        , rfs =
               el.requestFullScreen
            || el.webkitRequestFullScreen
            || el.mozRequestFullScreen
    ;
    rfs.call(el);
});

// Autofullscreen 2
function launchFullScreen(element) {
  if(element.requestFullScreen) {
    element.requestFullScreen();
  } else if(element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if(element.webkitRequestFullScreen) {
    element.webkitRequestFullScreen();
  }
}

// Launch fullscreen for browsers that support it!
launchFullScreen(document.documentElement); // the whole page
</script>

</body>
</html>